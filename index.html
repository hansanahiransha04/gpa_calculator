<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<link rel="icon" href="logo.png" type="image/png">
<title>GWUIM | GPA Calculator</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg:#0f172a;
    --card:#1e293b;
    --accent:#00d4ff;
    --muted:#808080;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:"Segoe UI",Roboto,Arial,sans-serif;
    background:var(--bg);
    color:white;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:14px;
    padding:10px 16px;
  }
  header img.logo{height:64px;width:auto;display:block}
  header h1{
    margin:0;
    color:var(--accent);
    font-size:1.4rem;
    text-align:center;
  }
  .page{padding:8px 16px 80px;}
  .grid{
    display:flex;
    flex-wrap:wrap;
    gap:20px;
    justify-content:center;
    align-items:flex-start;
  }
  .semester{
    background:var(--card);
    border-radius:10px;
    padding:12px;
    flex:1 1 45%;
    min-width:280px;
    max-width:540px;
  }
  .semester h2{
    margin:0 0 8px 0;
    color:var(--accent);
    font-size:1.05rem;
    text-align:center;
  }
  table{
    width:100%;
    border-collapse:collapse;
    margin-top:6px;
  }
  th,td{
    padding:8px 6px;
    text-align:center;
    font-size:0.95rem;
  }
  thead th{
    background:#334155;
    font-weight:600;
    color:#fff;
  }
  tbody td{
    background:var(--card);
  }
  select{
    padding:6px 8px;
    border-radius:6px;
    border:1px solid rgba(255,255,255,0.2);
    background-color:#334155;
    color:white;
    min-width:100px;
    appearance:none;
    cursor:pointer;
  }
  select:focus{outline:2px solid var(--accent);}
  option{background-color:#1e293b;color:white;}
  .sem-result{
    margin-top:10px;
    text-align:center;
    font-weight:700;
  }
  .overall{
    margin:24px auto 16px;
    text-align:center;
    font-size:1.2rem;
    font-weight:700;
    color:var(--accent);
  }
  footer{
    width:100%;
    text-align:center;
    margin-top:28px;
    padding:10px 6px;
    font-size:0.9rem;
    color:var(--muted);
    position:sticky;
    bottom:0;
    background:var(--bg);
  }
  @media (max-width:900px){
    .semester{flex:1 1 100%}
  }
  .note{font-size:0.9rem;color:var(--muted);text-align:center;margin-top:6px}
</style>
</head>
<body>
<header>
  <img class="logo" src="logo.png" alt="GWUIM logo">
  <h1> GPA Calculator</h1>
</header>

<main class="page">
  <div class="grid" id="grid"></div>
  <div class="overall" id="overallGPA">ðŸŽ¯ Overall GPA: -</div>
</main>

<footer>
Â© 2025 <a href="https://gwu.ac.lk/" target="_blank">Gampaha Wickramarachchi University of Indigenous Medicine </a> | Designed by <a href="https://linkedin.com/in/HansanaHiransha" target="_blank">Hansana Hiransha</a>
</footer>

<script>
const SEMESTERS = {
  "Semester 1": [
    {code:"IT1106", name:"Information Systems", credit:4},
    {code:"IT1206", name:"Computer Systems", credit:4},
    {code:"IT1306", name:"FOSS for Personal Computing", credit:3},
    {code:"IT1406", name:"Intro to Programming", credit:4},
    {code:"IT1506", name:"Fundamentals of Mathematics", credit:4}
  ],
  "Semester 2": [
    {code:"EN2106", name:"Communication Skills I", credit:0, gpa:false}, // Pass/Fail
    {code:"IT2106", name:"Mathematics for Computing I", credit:3},
    {code:"IT2206", name:"Fundamentals of Software Engineering", credit:4},
    {code:"IT2306", name:"Database Systems", credit:4},
    {code:"IT2406", name:"Web App Development I", credit:4}
  ],
  "Semester 3": [
    {code:"IT3106", name:"Programming Concepts", credit:4},
    {code:"IT3206", name:"Database Management", credit:4},
    {code:"IT3306", name:"Networking Basics", credit:4},
    {code:"EN3106", name:"English II", credit:3},
    {code:"MA3106", name:"Statistics I", credit:4}
  ],
  "Semester 4": [
    {code:"IT4106", name:"OOP", credit:4},
    {code:"IT4206", name:"Web Development II", credit:4},
    {code:"IT4306", name:"AI Fundamentals", credit:3},
    {code:"EC4106", name:"Economics for IT", credit:3},
    {code:"MA4106", name:"Mathematics II", credit:4}
  ],
  "Semester 5": [
    {code:"IT5106", name:"Software Engineering Practices", credit:4},
    {code:"IT5206", name:"Cybersecurity", credit:4},
    {code:"IT5306", name:"Data Science", credit:4},
    {code:"EN5106", name:"English III", credit:3},
    {code:"PH5106", name:"Physics for Computing", credit:3}
  ],
  "Semester 6": [
    {code:"IT6106", name:"Cloud Computing", credit:4},
    {code:"IT6206", name:"Internet of Things", credit:4},
    {code:"IT6306", name:"Advanced AI", credit:4},
    {code:"MA6106", name:"Mathematics III", credit:3},
    {code:"IT6406", name:"ICT Applications", credit:3}
  ],
  "Semester 7": [
    {code:"IT7106", name:"Machine Learning", credit:4},
    {code:"IT7206", name:"Big Data Analytics", credit:4},
    {code:"IT7306", name:"Mobile App Development", credit:4},
    {code:"IT7406", name:"Project Management", credit:3},
    {code:"MA7106", name:"Statistics II", credit:3}
  ],
  "Semester 8": [
    {code:"IT8106", name:"Internship", credit:6},
    {code:"IT8206", name:"Final Project", credit:6},
    {code:"IT8306", name:"Research Methods", credit:4},
    {code:"IT8406", name:"ICT Innovation", credit:3},
    {code:"IT8506", name:"Entrepreneurship", credit:3}
  ]
};

const GRADES = ["Select Grade","A+","A","A-","B+","B","B-","C+","C","C-","D+","D","E"];
const GRADE_POINTS = {
  "A+":4.00,"A":4.00,"A-":3.70,
  "B+":3.30,"B":3.00,"B-":2.70,
  "C+":2.30,"C":2.00,"C-":1.70,
  "D+":1.30,"D":1.00,"E":0.00
};

function getGPAColor(gpa){
  if(gpa >= 3.7) return "#00ff88";
  if(gpa >= 3.0) return "#00d4ff";
  if(gpa >= 2.0) return "#ffcc00";
  return "#ff4d4d";
}

const grid = document.getElementById('grid');

// --- Build semester tables ---
for(const [semName, subjects] of Object.entries(SEMESTERS)){
  const semCard = document.createElement('section');
  semCard.className = 'semester';
  semCard.dataset.semester = semName;

  const h = document.createElement('h2');
  h.textContent = semName;
  semCard.appendChild(h);

  const table = document.createElement('table');
  const thead = document.createElement('thead');
  const headRow = document.createElement('tr');
  ['Code','Subject','Grade','Credits'].forEach(c=>{
    const th = document.createElement('th'); th.textContent = c; headRow.appendChild(th);
  });
  thead.appendChild(headRow);
  table.appendChild(thead);

  const tbody = document.createElement('tbody');

  subjects.forEach(sub=>{
    const tr = document.createElement('tr');
    const tdCode = document.createElement('td'); tdCode.textContent = sub.code;
    const tdSub = document.createElement('td'); tdSub.textContent = sub.name;
    const tdGrade = document.createElement('td');
    const sel = document.createElement('select');
    sel.className = 'grade-select';

    if(sub.code === "EN2106"){
      ["Select","Pass","Fail"].forEach(v=>{
        const op = document.createElement('option'); op.value = v; op.text = v; sel.appendChild(op);
      });
    } else {
      GRADES.forEach(g=>{
        const op = document.createElement('option'); op.value = g; op.text = g; sel.appendChild(op);
      });
    }

    tdGrade.appendChild(sel);
    const tdCred = document.createElement('td'); tdCred.textContent = sub.credit;
    tr.append(tdCode,tdSub,tdGrade,tdCred);
    tbody.appendChild(tr);
  });

  table.appendChild(tbody);
  semCard.appendChild(table);

  const semResult = document.createElement('div');
  semResult.className = 'sem-result';
  semResult.dataset.semName = semName;
  semResult.textContent = `${semName} GPA: -`;
  semCard.appendChild(semResult);

  grid.appendChild(semCard);
}

// --- GPA Calculation ---
function calculateAll(){
  let totalPoints = 0, totalCredits = 0;

  document.querySelectorAll('.semester').forEach(sem=>{
    const rows = sem.querySelectorAll('tbody tr');
    let semPoints = 0, semCredits = 0;

    rows.forEach(row=>{
      const sel = row.querySelector('select.grade-select');
      const grade = sel.value;
      const credit = parseFloat(row.lastChild.textContent);

      if(grade === "Select" || grade === "Select Grade") return;
      if(grade === "Pass" || grade === "Fail") return;

      const gp = GRADE_POINTS[grade] ?? 0;
      semPoints += gp * credit;
      semCredits += credit;
    });

    const semGPA = semCredits ? semPoints / semCredits : 0;
    const semResult = sem.querySelector('.sem-result');
    semResult.textContent = `${sem.dataset.semester} GPA: ${semGPA.toFixed(2)}`;
    semResult.style.color = getGPAColor(semGPA);

    totalPoints += semPoints;
    totalCredits += semCredits;
  });

  const overall = totalCredits ? totalPoints / totalCredits : 0;
  const overallDiv = document.getElementById('overallGPA');
  overallDiv.textContent = `ðŸŽ¯ Overall GPA: ${overall.toFixed(2)}`;
  overallDiv.style.color = getGPAColor(overall);
}

grid.addEventListener('change', e=>{
  if(e.target.classList.contains('grade-select')) calculateAll();
});
</script>
</body>
</html>
